# SEWA_XAI Migration Guide

This guide describes the required steps to migrate and set up the SEWA_XAI project database and backend for a successful deployment.

## 1. Database Setup
- Ensure MySQL is installed and running (default port: 3306).
- Create a database named `sewa` (or set `DB_NAME`).
- Create a MySQL user with access to the database (configure `DB_USER` / `DB_PASSWORD`).

## 2. Running Migrations
- Install dependencies in the backend directory:
  ```
  cd backend
  npm install
  ```
- Generate or run TypeORM migrations to create the required tables:
  - To generate a migration (if entities change):
    ```
    npx typeorm-ts-node-commonjs migration:generate ./src/migrations/AutoGeneratedInitSchema -d ./src/data-source.ts
    ```
  - To run all migrations:
    ```
    npx typeorm-ts-node-commonjs migration:run -d ./src/data-source.ts
    ```
- If you have a SQL dump (e.g., `db/sewa_dump.sql`), you can import it instead:
  ```
  mysql -u <user> -p <db_name> < db/sewa_dump.sql
  ```

## 3. Environment Variables
- Copy `backend/.env.example` to `backend/.env` and set:
  - `JWT_SECRET`
  - `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASSWORD`, `DB_NAME`
  - (optional) `SUPERADMIN_PASSWORD` to enable the seed migration

## 4. Backend Start
- Start the backend server:
  ```
  npm run build
  npm run start:prod
  ```

## 5. Frontend Start
- Install frontend dependencies and start the frontend as needed.

---

**Note:**
- All entity and migration changes must be reflected in the database via migrations or SQL import.
- If you encounter connection errors, verify MySQL is running and credentials are correct.
